$(document).ready(function(){function e(){r.__call("trends_place",o,function(e,t,a){n.each(function(t){if(a)$(this).append("<p>"+localStorage.getItem("topic"+t)+"</p>"),$(this).addClass(localStorage.getItem("class"+t));else{var r=e[0].trends[t].name.replace(/\s+/g,"").replace("#","");$(this).append("<p>"+e[0].trends[t].name+"</p>"),$(this).addClass(r),localStorage.setItem("topic"+t,e[0].trends[t].name),localStorage.setItem("class"+t,r)}})},!0)}function t(){var e=$(".button").prev().val();localStorage.setItem("userName",e),$("footer").append("<h1>"+e+"</h1>"),$("footer h1:last-child").addClass(e.replace(/\s+/g,"")),$("form").hide(),$(".row").css("display","flex"),$("footer").css("display","flex")}function a(e,t){$.ajax(e).done(function(e){if(e.result)for(var a=0;3>a;a++){var r=e.result.docs[a].source.enriched.url.title.substring(0,50),o=e.result.docs[a].source.enriched.url.url,n=$("<a href='"+o+"'>"+r+"</a>");$("."+t.replace(/\s+/g,"")+"> p").hide(),$("."+t.replace(/\s+/g,"")).append(n),$("."+t.replace(/\s+/g,"")+"> a").css({color:"white","font-size":"150%","text-decoration":"none",padding:"10px 0"})}else $.ajax({url:"https://www.reddit.com/search.json?q="+t,success:function(e){for(var a=0;3>a;a++){var r=e.data.children[a].data.title.substring(0,50),o=e.data.children[a].data.url,n=$("<a href='"+o+"'>"+r+"</a>");$("."+t.replace(/\s+/g,"")+"> p").hide(),$("."+t.replace(/\s+/g,"")).append(n),$("."+t.replace(/\s+/g,"")+"> a").css({color:"white","font-size":"150%","text-decoration":"none",padding:"10px 0"})}},dataType:"json"})}).fail(function(){})}var r=new Codebird;r.setBearerToken("AAAAAAAAAAAAAAAAAAAAAK97igAAAAAAL6M3uxb0OEWglYZcJpxq89e46zY%3Dt682yccM1IgilC04xfWysYugpZ2ZzmaLpIcvNTB9L6xhdjaAXC");var o={id:23424977},n=$(".trend");e(),$(".button").on("click",t),$("main").on("keypress",function(e){return 13==e.which?(e.preventDefault,t(),$(this).off("keypress"),!1):void 0}),n.on("click","a",function(e){e.preventDefault(),window.open($(this).attr("href"))});var s=[];n.on("click","p",function(){var e=$(this).text().replace("#",""),t="https://gateway-a.watsonplatform.net/calls/data/GetNews?outputMode=json&start=now-1d&end=now&count=5&q.enriched.url.enrichedTitle.keywords.keyword.text="+e+"&return=enriched.url.url,enriched.url.title&apikey=884243d26352312be01ce6cfcfb5cf276e9000a2";a(t,e),s.push($(this).text()),localStorage.setItem(localStorage.getItem("userName")+" history",s)}),$(".refresh").on("click",function(){n.empty(),e()});var c=!0;$("footer").on("click","h1:not(.refresh)",function(){if(c){var e=localStorage.getItem(localStorage.getItem("userName")+" history").split(",");for($("footer").append("<div></div>"),i=0;i<e.length;i+=1)$("footer > div").append("<p>"+e[i]+"</p>");c=!c}else $("footer > div").remove(),c=!c})});